# chap 6

## 헬름

- 다양한 리소스를 각각 관리하지 않고 하나의 패키지로 관리하는 도구
- 애플리케이션을 실행하기 위해서 쿠버네티스 리소스가 여러 개 필요한 경우가 많다
- 파드의 노출을 담당하는 Service
- 애플리케이션 설정에 관련된 ConfigMap
- 기밀 정보를 다루는 Secret 등을 하나의 애플리케이션에 포함시킨다

### 헬름 차트

- 애플리케이션 설치에 사용되는 네트워크, 스토리지, 보안과 관련된 여러 쿠버네티스 리소스를 묶어놓은 패키지
- 다양한 오브젝트를 각각 설치하지 않고 단일 헬름 차트로 일괄 설치 가능
- 각 오브젝트별 옵션 설정에 필요한 변수는 별도의 템플릿 변수 파일(values.yaml)을 사용해 일괄 적용
- 하나의 변수 파일만 수정하면 해당 변수를 포함하는 모든 템플릿 파일에 공통으로 적용
- 

### 헬름 차트 디렉터리

- Chart.yml: 차트에 대한 정보가 담긴 YAML 파일
- LICENSE: 차트의 라이선스 정보가 담긴 텍스트 파일
- README.md: 해당 차트에 대한 설명을 포함한 README 파일
- values.yaml: 차트의 기본 템플릿 변수 파일
- charts/:  차트에 종속된 차트들을 포함하는 디렉터리
- crds/: 커스텀 자원 정의
- templates/: values 파일과 같이 유효한 쿠버네티스 매니페스트 파일을 생성하는 템플릿 디렉터리
- templates/NOTES.txt: 차트 사용법을 설명하는 텍스트 파일

### 헬름 레포지토리

- 다양한 헬름 차트를 저장하고 공유하는 저장소
- 헬름 리포지토리는 로컬에 원격 리포지토리 주소를 등록해서 사용 가능

### 템플릿

- 일정한 형식 또는 포맷을 의미
- 헬름은 템플릿을 사용해 설치와 관련된 파일을 관리

### 주요 헬름 명령어

- helm repo add: 애플리케이션 설치에 사용하는 헬름 리포지토리를 로컬 환경에 추가
- helm pull: 헬름 차트 파일을 로컬호스트로 내려받는다
- cp values.yaml my-values.yaml: 원본 템플릿 변수 파일의 이력 관리를 위해 템플릿 변수 파일(values.yaml)을 새로운 파일(my-values.yaml)로 복사하여 새롭게 생성한 파일에서 필요한 옵션을 수정
- helm install {helm 이름} -f my-values.yaml . : 수정한 파일을 템플릿 옵션 파일로 지정해 원하는 애플리케이션을 설치
- helm ls: 설치된 헬름 차트 목록을 확인
- helm get manifest: 주로 디버깅 용도로 사용하며, 현재 실행 중인 헬름 차트의 전체 YAML 파일 목록 및 상세 설정을 확인
- helm upgrade: 기존 헬름 차트의 변수 등을 수정해서 재배포
- helm delete: 헬름 차트 삭제

## Requests/Limits

- 같은 노드에 실행 중인 여러 파드는 동일한 호스트 노드의 자원을 공유하므로 특정 파드가 자원을 많이 사용하면 공통으로 사용 중인 노드 자원이 줄어들어 다른 파드의 성능에 영향을 끼침

### Limit

- 사용 가능한 자원을 제한

### Requests

- 처음 노드에 파드를 할당할 때 요청량 이상의 여유 자원이 있는 노드에 파드를 할당하게 하는 옵션
- 파드가 배치된 이후 각 파드간 자원 사용량이 증가해서 노드에서 할당 가능한 자원 이상을 사용해 자원 경합이 발생하면 파드는 Requests에서 할당한 자원만큼 사용이 가능하도록 보장받음