# Chap 1

# 쿠버네티스란?

<aside>
💡

대규모 클러스터 환경에서 컨테이너화된 애플리케이션을 자동으로 배포하고 확장, 관리하는 데 필요한 것들을 자동화하는 오픈소스 플랫폼

</aside>

<aside>
💡

개발자가 컨테이너 환경으로 애플리케이션을 만들면 쿠버네티스로 여러 대의 서버로 구성된 클러스터 환경에 해당 프로그램을 편리하고 안정적으로 배포할 수 있다.

</aside>

## 쿠버네티스 특징

- 소스코드 기반으로 클러스터를 운영
    - 실제 운영 시스템에 적용하기 전에 코드로 구현할 수 있어서 모든 이해관계자가 사전에 충분히 검토할 수 있음
    - 사전 검증 작업으로 장애를 예방하고 애플리케이션 배포 속도를 향상할 수 있음
- 의도한 상태로 클러스터를 관리
    - 최초 의도한 상태와 현재 실행 중인 상태를 쿠버네티스 컨트롤러가 자동으로 끊임없이 확인
    - 만약 차이점을 발견하면 현재 상태를 자동으로 처음에 의도한 상태로 변경
    - 자동 복구 기능으로 생산성을 향상시킴
- 가상 머신 환경이 아닌 컨테이너 기반
    - 애플리케이션을 컨테이너에 맞게 새롭게 배포해야함
    - 애플리케이션을 실행하는 단위인 파드는 임의의 이름을 지정하고 문제가 발생하면 즉각 새로운 파드로 교체

## 쿠버네티스 장점

- 코드로 애플리케이션과 인프라 구성이 가능
- 새로운 프로그램을 빠르게 확장
- 애플리케이션 롤아웃과 롤백 등 배포와 관련된 다양한 옵션을 제공하여 문제가 발생했을 때 빠르게 복구 가능
- 운영 중인 서비스를 중단하지 않고도 롤링 업데이트 방식으로 새로운 애플리케이션을 배포할 수 있음
- 특정 기업에 종속되지 않는 표준 오픈소스라서 벤더 락인 문제가 없다
- 쿠버네티스 환경에서 개발한 애플리케이션은 동일한 인터페이스와 개발 환경을 사용해서 확장이 용이
- 초기 시스템 구축 비용을 줄일 수 있음, 가상 머신 3대로 가능

## Kubespray

- 다양한 설치 옵션 및 운영체제를 지원하는 앤서블 기반의 쿠버네티스 설치 자동화 도구
- 여러 번 실행해도 항상 동일한 실행 결과를 보장

## K3s

랜처에서 지원하는 솔루션으로  Edge, IoT 등 리소스가 부족한 환경에서 사용하기에 적합

### 클러스터의 노드 정보 확인

```bash
kubectl get nodes -o wide
```

### 쿠버네티스 전체 Pod 조회

```bash
kubectl get pod -A
```

# 로컬 호스트에서 원격 쿠버네티스 관리하기

- 쿠버네티스의 모든 작업은 컨트롤 플레인 노드의 API 파드와 통신하는 과정을 거쳐 실행
- 원격 서버와 로컬 호스트에서 실행하는 모든 명령어는 동일하게 쿠버네티스의 API가 처리
- 로컬호스트에서 작업하면 동일한 환경에서 여러 클러스터를 관리할 수 있고 작업에 드는 시간과 노력을 크게 줄일 수 있음
- kubectl을 이용하면 파드를 생성하고 조회하고 삭제하는 등 쿠버네티스 관리 업무를 수행

### kubeconfig

원격 클러스터의 API 서버 통신에 필요한 인증 정보를 관리

원격 클러스터의 관리에 필요한 인증 정보가 저장